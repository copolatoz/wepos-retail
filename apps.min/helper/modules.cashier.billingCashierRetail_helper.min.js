/**
 * Filename: modules.cashier.billingCashierRetail_helper.js
 * Generated 2021-01-18 at 03:27:34 AM
 */
Ext.define("ExtApp.helper.supervisor",{login:function(verifySpvData,scope){var me=scope;var h_this=this;me.verifySpvData=verifySpvData;if(!me.verifySpvData){alert('Load Supervisor Access Failed');return false;}
me.verifySpvData.verifyMode=1;var d=new Date();var n=d.getTime();me.verifySpvData.verifyRandNo=n;var WinIdSpv=me.verifySpvData.spvId+'_'+me.verifySpvData.verifyRandNo;me.WinSupervisor=Ext.create('Ext.window.Window',{id:'spvLogin_'+WinIdSpv,title:'Supervisor Access',width:300,iconCls:'icon-lock',animCollapse:false,constrainHeader:true,resizable:false,closable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_supervisor_'+WinIdSpv,width:300,border:false,bodyBorder:false,items:[{xtype:'panel',layout:{type:'anchor'},bodyPadding:10,border:false,items:[{xtype:'textfield',emptyText:'User ID',name:'username',anchor:'100%',inputType:'password',allowBlank:false,listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){h_this.verify_supervisor(me);}}}},{xtype:'textfield',name:'password',emptyText:'Password',anchor:'100%',inputType:'password',allowBlank:false,listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){h_this.verify_supervisor(me);}}}},{xtype:'textfield',name:'user_pin',emptyText:'PIN',anchor:'100%',inputType:'password',allowBlank:false,listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){h_this.verify_supervisor(me);}}}},{xtype:'displayfield',name:'displayAccess',value:'need Access Supervisor'}]}]}],buttons:[{text:'Verify Access',formBind:true,iconCls:'icon-lock-open',id:'btndoVerify_supervisor_'+WinIdSpv,margin:'0 10 0 0',handler:function(){h_this.verify_supervisor(me);}},{text:'Cancel',formBind:true,iconCls:'btn-cancel',id:'btnCancelVerify_supervisor_'+WinIdSpv,margin:'0 40 0 0',handler:function(){me.WinSupervisor.hide();delete me.WinSupervisor;}}],listeners:{show:function(){var form=Ext.getCmp('form_supervisor_'+WinIdSpv).getForm();form.reset();if(!me.verifySpvData.verifyMode){me.verifySpvData.verifyMode=0;}
form.findField('displayAccess').setValue('Access for '+me.verifySpvData.title);if(me.verifySpvData.verifyMode==1){form.findField('password').show();}else{form.findField('password').hide();}
if(opt_supervisor_pin_mode==1){form.findField('username').hide();form.findField('password').hide();form.findField('user_pin').show();form.findField('user_pin').focus();}else{form.findField('username').show();form.findField('password').show();form.findField('user_pin').hide();form.findField('username').focus();}}}});me.WinSupervisor.show();},verify_supervisor:function(scope){var me=scope;var verifySpvData=me.verifySpvData;var WinIdSpv=verifySpvData.spvId+'_'+verifySpvData.verifyRandNo;var form=Ext.getCmp('form_supervisor_'+WinIdSpv).getForm();var fUsername=form.findField('username').getValue();var fPassword=form.findField('password').getValue();var fUser_pin=form.findField('user_pin').getValue();if(verifySpvData.verifyMode==0){form.findField('password').allowBlank=true;}else{form.findField('password').allowBlank=false;}
if(opt_supervisor_pin_mode==1){form.findField('username').allowBlank=true;form.findField('password').allowBlank=true;form.findField('user_pin').allowBlank=false;}else{form.findField('username').allowBlank=false;form.findField('user_pin').allowBlank=true;}
if(form.isValid()){var myMask=new Ext.LoadMask(Ext.getCmp('form_supervisor_'+WinIdSpv),{msg:"Verify..."});myMask.show();if(opt_supervisor_pin_mode==0){if(fUsername==''){myMask.hide();ExtApp.Msg.warning('Username / User ID cannot empty!');}
if(verifySpvData.verifyMode==1){if(fPassword==''){myMask.hide();ExtApp.Msg.warning('Password cannot empty!');}}}
Ext.Ajax.request({waitMsg:'Verify...',url:appUrl+'systems/supervisor/verify',method:'POST',params:{verifyMode:verifySpvData.verifyMode,username:fUsername,password:fPassword,user_pin:fUser_pin,access:verifySpvData.access,pin_mode:opt_supervisor_pin_mode,log:verifySpvData.log,data:verifySpvData.data,ref_id_1:verifySpvData.ref_id_1,ref_id_2:verifySpvData.ref_id_2},success:function(response,options){var rsp=Ext.decode(response.responseText);myMask.hide();if(rsp.success==false){ExtApp.Msg.warning(rsp.info);}else{me.WinSupervisor.hide();if(!verifySpvData.spvId){}else
if(verifySpvData.spvId!=''){Ext.getCmp(verifySpvData.spvId).setValue(rsp.confirm.data.user_username);}
if(!verifySpvData.saveBtn){}else
if(verifySpvData.saveBtn!=''){Ext.getCmp(verifySpvData.saveBtn).fireEvent('click');}
me.supervisorConfirm=rsp.confirm;delete me.WinSupervisor;}},failure:function(response,options){var rsp=Ext.decode(response.responseText);ExtApp.Msg.warning(rsp.info);myMask.hide();}});}}});Ext.define("ExtApp.helper.numlockVirtual",{popup:function(getNumlockData,scope){var me=scope;var h_this=this;me.getNumlockData=getNumlockData;if(!me.getNumlockData){alert('Target Field Not Found!');return false;}
if(!me.getNumlockData.defaultValue){me.getNumlockData.defaultValue=0;}
if(!me.getNumlockData.title){if(me.getNumlockData.tipe=='calculator'){me.getNumlockData.title='Calculator Virtual';}else{me.getNumlockData.title='Numlock Virtual';}}
var d=new Date();var n=d.getTime();me.getNumlockData.numlockRandNo=n;var WinIdNumlock='WinNumlockVirtual';me.WinIdNumlock=WinIdNumlock;if(!me.WinNumlockVirtual){me.WinNumlockVirtual=Ext.create('Ext.window.Window',{id:'numlockPopup_'+WinIdNumlock,title:me.getNumlockData.title,width:300,iconCls:'icon-keyboard',animCollapse:false,constrainHeader:true,resizable:false,closable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_numlockVirtual_'+me.WinIdNumlock,width:300,border:false,bodyBorder:false,items:[{xtype:'panel',layout:{type:'anchor'},bodyPadding:10,border:false,items:[{xtype:'displayfield',name:'numlock_result',anchor:'100%',labelSeparator:'',labelWidth:0,height:50,fieldStyle:'color:#444; text-align: right; font-weight:bold; font-size:24px; border: 1px solid #999; padding: 10px 15px;'},{xtype:'fieldcontainer',layout:{type:'column'},anchor:'100%',fieldLabel:'',items:[{xtype:'button',name:'numlock_no7',text:'7',width:50,height:50,margin:'0 0 0 0',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,7,'numlock_no7');}}},{xtype:'button',name:'numlock_no8',text:'8',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,8,'numlock_no8');}}},{xtype:'button',name:'numlock_no9',text:'9',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,9,'numlock_no9');}}},{xtype:'button',name:'numlock_clear',text:'C',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'','numlock_clear');}}},{xtype:'button',name:'numlock_remove',text:'<=',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'','numlock_remove');}}}]},{xtype:'fieldcontainer',layout:{type:'column'},anchor:'100%',fieldLabel:'',items:[{xtype:'button',name:'numlock_no4',text:'4',width:50,height:50,margin:'0 0 0 0',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,4,'numlock_no4');}}},{xtype:'button',name:'numlock_no5',text:'5',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,5,'numlock_no5');}}},{xtype:'button',name:'numlock_no6',text:'6',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,6,'numlock_no6');}}},{xtype:'button',name:'numlock_bagi',id:'numlock_bagi'+me.WinIdNumlock,text:'/',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'/','numlock_bagi');}}},{xtype:'button',name:'numlock_kali',id:'numlock_kali'+me.WinIdNumlock,text:'X',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'X','numlock_kali');}}}]},{xtype:'fieldcontainer',layout:{type:'column'},anchor:'100%',fieldLabel:'',items:[{xtype:'button',name:'numlock_no1',text:'1',width:50,height:50,margin:'0 0 0 0',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'1','numlock_no1');}}},{xtype:'button',name:'numlock_no2',text:'2',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'2','numlock_no2');}}},{xtype:'button',name:'numlock_no3',text:'3',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'3','numlock_no3');}}},{xtype:'button',name:'numlock_tambah',id:'numlock_tambah'+me.WinIdNumlock,text:'+',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'+','numlock_tambah');}}},{xtype:'button',name:'numlock_kurang',id:'numlock_kurang'+me.WinIdNumlock,text:'-',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'-','numlock_kurang');}}}]},{xtype:'fieldcontainer',layout:{type:'column'},anchor:'100%',fieldLabel:'',items:[{xtype:'button',name:'numlock_no000',text:'000',width:50,height:50,margin:'0 0 0 0',textAlign:'center',cls:'button-size20',listeners:{click:function(){h_this.numlockAddCalc(me,'000','numlock_no0');}}},{xtype:'button',name:'numlock_no0',text:'0',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'0','numlock_no0');}}},{xtype:'button',name:'numlock_titik',text:'.',width:50,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-numlock',listeners:{click:function(){h_this.numlockAddCalc(me,'.','numlock_titik');}}},{xtype:'button',name:'numlock_enter',text:'OK / ENTER',width:105,height:50,margin:'0 0 0 5',textAlign:'center',cls:'button-size18',listeners:{click:function(){h_this.numlockAddCalc(me,'E','numlock_enter');}}}]}]}]}],listeners:{show:function(){var form=Ext.getCmp('form_numlockVirtual_'+me.WinIdNumlock).getForm();form.findField('numlock_result').setValue(me.getNumlockData.defaultValue);if(me.getNumlockData.tipe=='numlock'){Ext.getCmp('numlock_kurang'+me.WinIdNumlock).setDisabled(true);Ext.getCmp('numlock_tambah'+me.WinIdNumlock).setDisabled(true);Ext.getCmp('numlock_bagi'+me.WinIdNumlock).setDisabled(true);Ext.getCmp('numlock_kali'+me.WinIdNumlock).setDisabled(true);}else{Ext.getCmp('numlock_kurang'+me.WinIdNumlock).setDisabled(false);Ext.getCmp('numlock_tambah'+me.WinIdNumlock).setDisabled(false);Ext.getCmp('numlock_bagi'+me.WinIdNumlock).setDisabled(false);Ext.getCmp('numlock_kali'+me.WinIdNumlock).setDisabled(false);}
me.WinNumlockVirtual.setTitle(me.getNumlockData.title);}}});}
me.WinNumlockVirtual.show();},numlockAddCalc:function(scope,addVal,FieldName){var me=scope;var form=Ext.getCmp('form_numlockVirtual_'+me.WinIdNumlock).getForm();var getValNumlockResult=form.findField('numlock_result').getValue();if(me.getNumlockData.tipe=='numlock'){if(FieldName=='numlock_kurang'||FieldName=='numlock_tambah'||FieldName=='numlock_bagi'||FieldName=='numlock_kali'){return false;}else
if(FieldName=='numlock_enter'){getValNumlockResult=parseFloat(getValNumlockResult);Ext.getCmp(me.getNumlockData.focusID).setValue(getValNumlockResult);me.WinNumlockVirtual.hide();if(me.getNumlockData.triggerID!=''){Ext.getCmp(me.getNumlockData.triggerID).fireEvent('click');}}else
{if(FieldName=='numlock_remove'){var totChrNumLock=getValNumlockResult.length;if((totChrNumLock-1)<=0){getValNumlockResult=0;}else{getValNumlockResult=getValNumlockResult.substr(0,(totChrNumLock-1));}}else
if(FieldName=='numlock_clear'){getValNumlockResult=0;}else
if(FieldName=='numlock_titik'){getValNumlockResult=getValNumlockResult+''+addVal;}else{getValNumlockResult=getValNumlockResult+''+addVal;getValNumlockResult=parseFloat(getValNumlockResult);}
form.findField('numlock_result').setValue(getValNumlockResult);}}}});