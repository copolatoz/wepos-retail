/**
 * Filename: cashier.openCashierShift.js
 * Generated 2020-11-20 at 10:54:11 PM
 */
Ext.define('ExtApp.modules.billing.model.model_dataShift',{extend:'Ext.data.Model',alias:'model_dataShift',fields:[{name:'id',type:'int'},{name:'nama_shift',type:'string'},{name:'jam_shift_start',type:'string'},{name:'jam_shift_end',type:'string'},{name:'created',type:'string'},{name:'createdby',type:'string'},{name:'updated',type:'string'},{name:'updatedby',type:'string'}],proxy:{type:'ajax',url:appUrl+'billing/dataShift/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.billing.store.store_dataShift',{extend:'Ext.data.Store',model:'ExtApp.modules.billing.model.model_dataShift',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.cashier.view.openCashierShift",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var phpJs=theApp.getHelper('phpJs');var required='<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';me.store_dataShift_openCashier=theApp.getStore('store_dataShift_openCashier',false);if(me.store_dataShift_openCashier==false){me.store_dataShift_openCashier=theApp.copyStore('billing','store_dataShift','store_dataShift_openCashier');}
me.store_dataShift_openCashier.proxy.extraParams.limit=9999999;me.store_dataShift_openCashier.proxy.extraParams.show_all_text=0;me.store_dataShift_openCashier.proxy.extraParams.show_choose_text=1;me.store_dataShift_openCashier.proxy.extraParams.is_dropdown=1;me.store_dataShift_openCashier.proxy.extraParams.product_type='';me.store_dataShift_openCashier.proxy.extraParams.keywords='';return desktop.createWindow({id:me.id,title:'Open Cashier (Shift)',width:600,height:450,iconCls:'user',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_openCashierShift',width:600,height:450,border:false,bodyBorder:false,fieldDefaults:{labelWidth:80,msgTarget:'side',autoFitErrors:false},layout:{type:'auto'},items:[{xtype:'panel',defaultType:'textfield',border:0,height:130,layout:{type:'border'},items:[{xtype:'panel',defaultType:'textfield',bodyPadding:5,border:0,region:'center',layout:{type:'auto',},items:[{xtype:'hidden',name:'id'},{xtype:'hidden',name:'tipe_shift',value:'open'},{xtype:'hidden',name:'user_shift'},{xtype:'textfield',id:me.id+'_OpenShift_spv',hidden:true,name:'spv_user',allowEmpty:false},{xtype:'hidden',name:'jam_shift_start'},{xtype:'combobox',name:'nama_shift',id:'user_shift_openCashierShift',fieldLabel:'Shift',width:270,margin:'0 0 5 0',store:me.store_dataShift_openCashier,queryMode:'local',displayField:'nama_shift',valueField:'nama_shift',typeAhead:true,minChars:1,forceSelection:true,allowBlank:false,listeners:{select:function(combo,records,eOpts){var form=Ext.getCmp('form_openCashierShift').getForm();var shift_id=records[0].data.id;var jam_shift_start=records[0].data.jam_shift_start;form.findField('user_shift').setValue(shift_id);form.findField('jam_shift_start').setValue(jam_shift_start);me.load_openCashierShift();}}},{fieldLabel:'User',name:'kasir_user',width:270,margin:'0 0 5 0',readOnly:true,allowEmpty:false},{xtype:'datefield',fieldLabel:'Tanggal',name:'tanggal_shift',width:270,margin:'0 0 5 0',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',allowEmpty:false,value:phpJs.date('d-m-Y'),},{fieldLabel:'Jam Open',name:'jam_shift',allowEmpty:false,width:170}]},{xtype:'panel',defaultType:'textfield',bodyPadding:5,border:0,region:'east',layout:{type:'auto'},items:[{xtype:'textfield',fieldLabel:'Total Uang Kertas',name:'jumlah_uang_kertas',readOnly:true,labelWidth:120,width:250,margin:'0 0 5 0',},{xtype:'textfield',fieldLabel:'Total Uang Koin',name:'jumlah_uang_koin',readOnly:true,labelWidth:120,width:250,margin:'0 0 5 0',}]}]},{xtype:'panel',defaultType:'textfield',border:0,height:250,layout:{type:'border'},items:[{xtype:'panel',flex:1,border:0,region:'center',layout:'auto',items:[{xtype:'fieldset',title:'Uang Kertas (jumlah lembar)',height:230,defaultType:'numberfield',margin:'0 5 0 5',items:[{fieldLabel:'100.000',name:'uang_kertas_100000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}},{fieldLabel:'50.000',name:'uang_kertas_50000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}},{fieldLabel:'20.000',name:'uang_kertas_20000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}},{fieldLabel:'10.000',name:'uang_kertas_10000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}},{fieldLabel:'5.000',name:'uang_kertas_5000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}},{fieldLabel:'2.000',name:'uang_kertas_2000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}},{fieldLabel:'1.000',name:'uang_kertas_1000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_kertas();}}}]}]},{xtype:'panel',flex:1,border:0,region:'east',layout:'auto',items:[{xtype:'fieldset',title:'Uang Koin (jumlah koin)',height:230,defaultType:'numberfield',margin:'0 5 0 5',items:[{fieldLabel:'1000',name:'uang_koin_1000',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_koin();}}},{fieldLabel:'500',name:'uang_koin_500',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_koin();}}},{fieldLabel:'200',name:'uang_koin_200',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_koin();}}},{fieldLabel:'100',name:'uang_koin_100',minValue:0,allowDecimals:false,hideTrigger:true,listeners:{blur:function(){me.calc_uang_koin();}}}]}]}]}]}],buttons:[{text:'Save & Print',formBind:true,iconCls:'btn-print',listeners:{click:function(){me.Verify_openCashierShift(true);}}},'->',{text:'Save',formBind:true,iconCls:'btn-save',listeners:{click:function(){me.Verify_openCashierShift();}}},{text:'Save',formBind:true,id:me.id+'_OpenShift_save',iconCls:'btn-save',hidden:true,listeners:{click:function(){me.save_openCashierShift();}}},{text:'Save',formBind:true,id:me.id+'_OpenShift_savePrint',iconCls:'btn-save',hidden:true,listeners:{click:function(){me.save_openCashierShift(true);}}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id);}}],listeners:{show:function(){me.store_dataShift_openCashier.load();me.load_openCashierShift();}}});}});