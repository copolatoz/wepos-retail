/**
 * Filename: master_pos.masterItemRetail.js
 * Generated 2018-08-01 at 09:26:56 AM
 */
Ext.define('ExtApp.modules.master_pos.model.model_masterItem',{extend:'Ext.data.Model',alias:'model_masterItem',fields:[{name:'id',type:'int'},{name:'item_code',type:'string'},{name:'item_sku',type:'string'},{name:'item_name',type:'string'},{name:'item_code_name',type:'string'},{name:'item_name_code',type:'string'},{name:'item_desc',type:'string'},{name:'item_manufacturer',type:'string'},{name:'sales_price',type:'string'},{name:'sales_price_show',type:'string'},{name:'item_price',type:'string'},{name:'item_price_show',type:'string'},{name:'item_hpp',type:'string'},{name:'item_hpp_show',type:'string'},{name:'last_in',type:'string'},{name:'last_in_show',type:'string'},{name:'total_qty_stok',type:'string'},{name:'item_type',type:'string'},{name:'item_type_name',type:'string'},{name:'item_image',type:'string'},{name:'item_image_show',type:'string'},{name:'item_image_src',type:'string'},{name:'category_id',type:'int'},{name:'item_category_name',type:'string'},{name:'item_category_code',type:'string'},{name:'subcategory1_id',type:'int'},{name:'item_subcategory1_name',type:'string'},{name:'item_subcategory1_code',type:'string'},{name:'subcategory2_id',type:'int'},{name:'item_subcategory2_name',type:'string'},{name:'item_subcategory2_code',type:'string'},{name:'subcategory3_id',type:'int'},{name:'item_subcategory3_name',type:'string'},{name:'item_subcategory3_code',type:'string'},{name:'subcategory4_id',type:'int'},{name:'item_subcategory4_name',type:'string'},{name:'item_subcategory4_code',type:'string'},{name:'unit_id',type:'int'},{name:'unit_name',type:'string'},{name:'unit_code',type:'string'},{name:'supplier_id',type:'int'},{name:'supplier_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'use_for_sales',type:'int'},{name:'use_for_sales_text',type:'string'},{name:'id_ref_menu',type:'int'},{name:'sales_use_tax',type:'int'},{name:'sales_use_tax_text',type:'string'},{name:'sales_use_service',type:'int'},{name:'sales_use_service_text',type:'string'},{name:'is_kerjasama',type:'int'},{name:'is_kerjasama_text',type:'string'},{name:'persentase_bagi_hasil',type:'string'},{name:'total_bagi_hasil',type:'string'},{name:'total_bagi_hasil',type:'string'},{name:'total_bagi_hasil_show',type:'string'},{name:'use_stok_kode_unik',type:'int'},{name:'use_stok_kode_unik_text',type:'string'},{name:'min_stock',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterItem/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterUnit',{extend:'Ext.data.Model',alias:'model_masterUnit',fields:[{name:'id',type:'int'},{name:'unit_name',type:'string'},{name:'unit_code',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterUnit/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterSupplier',{extend:'Ext.data.Model',alias:'model_masterSupplier',fields:[{name:'id',type:'int'},{name:'supplier_code',type:'string'},{name:'supplier_name',type:'string'},{name:'supplier_contact_person',type:'string'},{name:'supplier_address',type:'string'},{name:'supplier_phone',type:'string'},{name:'supplier_fax',type:'string'},{name:'supplier_email',type:'string'},{name:'supplier_status',type:'string'},{name:'supplier_status_text',type:'string'},{name:'keterangan_blacklist',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterSupplier/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_itemCategory',{extend:'Ext.data.Model',alias:'model_itemCategory',fields:[{name:'id',type:'int'},{name:'item_category_name',type:'string'},{name:'item_category_code',type:'string'},{name:'item_category_desc',type:'string'},{name:'item_category_code_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/itemCategory/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_itemSubCategory1',{extend:'Ext.data.Model',alias:'model_itemSubCategory1',fields:[{name:'id',type:'int'},{name:'item_subcategory1_name',type:'string'},{name:'item_subcategory1_code',type:'string'},{name:'item_subcategory1_desc',type:'string'},{name:'item_subcategory1_code_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/itemSubCategory1/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_itemSubCategory2',{extend:'Ext.data.Model',alias:'model_itemSubCategory2',fields:[{name:'id',type:'int'},{name:'item_subcategory2_name',type:'string'},{name:'item_subcategory2_code',type:'string'},{name:'item_subcategory2_desc',type:'string'},{name:'item_subcategory2_code_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/itemSubCategory2/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_itemSubCategory3',{extend:'Ext.data.Model',alias:'model_itemSubCategory3',fields:[{name:'id',type:'int'},{name:'item_subcategory3_name',type:'string'},{name:'item_subcategory3_code',type:'string'},{name:'item_subcategory3_desc',type:'string'},{name:'item_subcategory3_code_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/itemSubCategory3/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_itemSubCategory4',{extend:'Ext.data.Model',alias:'model_itemSubCategory4',fields:[{name:'id',type:'int'},{name:'item_subcategory4_name',type:'string'},{name:'item_subcategory4_code',type:'string'},{name:'item_subcategory4_desc',type:'string'},{name:'item_subcategory4_code_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/itemSubCategory4/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_masterItem',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterItem',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_itemGroup',{extend:'Ext.data.Store',fields:['val','name'],data:[{"val":"main","name":"Bahan Baku"},{"val":"support","name":"Bahan Pendukung"}],autoLoad:false});Ext.define('ExtApp.modules.master_pos.store.store_masterUnit',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterUnit',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_masterSupplier',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterSupplier',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_itemCategory',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_itemCategory',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_itemSubCategory1',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_itemSubCategory1',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_itemSubCategory2',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_itemSubCategory2',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_itemSubCategory3',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_itemSubCategory3',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_itemSubCategory4',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_itemSubCategory4',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.master_pos.view.masterItemRetail",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_masterItem_masterItemRetail=theApp.getStore('store_masterItem_masterItemRetail',false);if(store_masterItem_masterItemRetail==false){store_masterItem_masterItemRetail=theApp.copyStore('master_pos','store_masterItem','store_masterItem_masterItemRetail');}
store_masterItem_masterItemRetail.proxy.extraParams.limit=25;store_masterItem_masterItemRetail.proxy.extraParams.show_all_text=0;store_masterItem_masterItemRetail.proxy.extraParams.show_choose_text=0;store_masterItem_masterItemRetail.proxy.extraParams.is_dropdown=0;store_masterItem_masterItemRetail.proxy.extraParams.keywords='';var helperGrid=theApp.getHelper('Grid');var store_ComboboxMasterUnit=theApp.getStore('store_ComboboxMasterUnit',false);if(store_ComboboxMasterUnit==false){store_ComboboxMasterUnit=theApp.copyStore('master_pos','store_masterUnit','store_ComboboxMasterUnit');}
store_ComboboxMasterUnit.proxy.extraParams.limit=99999;store_ComboboxMasterUnit.proxy.extraParams.show_all_text=0;store_ComboboxMasterUnit.proxy.extraParams.show_choose_text=1;store_ComboboxMasterUnit.proxy.extraParams.is_dropdown=1;store_ComboboxMasterUnit.proxy.extraParams.keywords='';var store_ComboboxItemGroup=theApp.getStore('store_ComboboxItemGroup',false);if(store_ComboboxItemGroup==false){store_ComboboxItemGroup=theApp.copyStore('master_pos','store_itemGroup','store_ComboboxItemGroup');}
store_ComboboxItemGroup.proxy.extraParams.limit=99999;var selModel_masterItemRetail=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_masterItemRetail').down('#deleteButton_masterItemRetail').setDisabled(selections.length==0);}}});var is_use_item_sku=opt_use_item_sku;var hide_use_item_sku=true;if(is_use_item_sku==='1'){hide_use_item_sku=false;}
me.pagingtb_masterItemRetail=helperGrid.paging({ds:store_masterItem_masterItemRetail,title:'Items'});return desktop.createWindow({id:me.id,title:'Master Item Retail',width:850,height:500,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:0,layout:{type:'fit'},items:[{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:store_masterItem_masterItemRetail,id:'grid_masterItemRetail',scroll:true,selModel:selModel_masterItemRetail,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'item_code',text:'Kode',width:140},{xtype:'gridcolumn',dataIndex:'item_sku',text:'SKU',width:200,hidden:hide_use_item_sku},{xtype:'gridcolumn',dataIndex:'item_name',text:'Nama',width:200},{xtype:'gridcolumn',dataIndex:'item_category_name',text:'Category',width:150},{xtype:'gridcolumn',dataIndex:'item_subcategory1_name',text:'Sub Cat 1',width:150},{xtype:'gridcolumn',dataIndex:'item_subcategory2_name',text:'Sub Cat 2',width:150},{xtype:'gridcolumn',dataIndex:'item_subcategory3_name',text:'Sub Cat 3',width:150},{xtype:'gridcolumn',dataIndex:'item_subcategory4_name',text:'Sub Cat 4',width:150},{xtype:'gridcolumn',dataIndex:'unit_code',text:'Unit',width:80},{xtype:'gridcolumn',dataIndex:'sales_price_show',text:'Harga Jual',width:100,align:'right'},{xtype:'gridcolumn',dataIndex:'item_price_show',text:'Harga beli',width:100,align:'right'},{xtype:'gridcolumn',dataIndex:'item_hpp_show',text:'Average',width:100,align:'right'},{xtype:'gridcolumn',dataIndex:'min_stock',text:'Min.Stok',width:80},{xtype:'gridcolumn',dataIndex:'item_desc',text:'Description',width:120},{xtype:'gridcolumn',dataIndex:'is_active_text',text:'Status Active',width:100}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_masterItemRetail').getSelectionModel().selected;if(getSelection.length>0){me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_masterItemRetail');}}},bbar:me.pagingtb_masterItemRetail,dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'textfield',name:'keywords',id:'keywords_masterItemRetail',width:250,labelSeparator:'',emptyText:'Keywords: Item Name / Category',anchor:'100%',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_masterItemRetail();}}}},{xtype:'button',text:'Search',itemId:'btnFilterSearch_masterItemRetail',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_masterItemRetail();}},{xtype:'button',text:'Reset',itemId:'btnResetFilterSearch_masterItemRetail',tooltip:'Reset',iconCls:'btn-reset',handler:function(){me.search_masterItemRetail(true);}},'->',{text:'Add',itemId:'addButton_masterItemRetail',tooltip:'Add Items',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_masterItemRetail');}},'-',{text:'Delete',itemId:'deleteButton_masterItemRetail',tooltip:'Delete Items',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_masterItemRetail').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;me.deleteConfirm_masterItemRetail();}else{ExtApp.Msg.info('Please Select Items!');}}},]}]}],listeners:{boxready:function(){store_ComboboxMasterUnit.load();store_ComboboxItemGroup.load();me.search_masterItemRetail();},show:function(){me.search_masterItemRetail(true);}}});},add_masterItemRetail:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Add New ';if(me.formType=='edit'){Titletext='Update ';}
me.tipeItemForm=1;var store_itemCategory_masterItemRetail=theApp.getStore('store_itemCategory_masterItemRetail',false);if(store_itemCategory_masterItemRetail==false){store_itemCategory_masterItemRetail=theApp.copyStore('master_pos','store_itemCategory','store_itemCategory_masterItemRetail');}
store_itemCategory_masterItemRetail.proxy.extraParams.limit=9999999;store_itemCategory_masterItemRetail.proxy.extraParams.show_all_text=0;store_itemCategory_masterItemRetail.proxy.extraParams.show_choose_text=1;store_itemCategory_masterItemRetail.proxy.extraParams.is_dropdown=1;store_itemCategory_masterItemRetail.proxy.extraParams.keywords='';var store_itemSubCategory1_masterItemRetail=theApp.getStore('store_itemSubCategory1_masterItemRetail',false);if(store_itemSubCategory1_masterItemRetail==false){store_itemSubCategory1_masterItemRetail=theApp.copyStore('master_pos','store_itemSubCategory1','store_itemSubCategory1_masterItemRetail');}
store_itemSubCategory1_masterItemRetail.proxy.extraParams.limit=9999999;store_itemSubCategory1_masterItemRetail.proxy.extraParams.show_all_text=0;store_itemSubCategory1_masterItemRetail.proxy.extraParams.show_choose_text=1;store_itemSubCategory1_masterItemRetail.proxy.extraParams.is_dropdown=1;store_itemSubCategory1_masterItemRetail.proxy.extraParams.keywords='';var store_itemSubCategory2_masterItemRetail=theApp.getStore('store_itemSubCategory2_masterItemRetail',false);if(store_itemSubCategory2_masterItemRetail==false){store_itemSubCategory2_masterItemRetail=theApp.copyStore('master_pos','store_itemSubCategory2','store_itemSubCategory2_masterItemRetail');}
store_itemSubCategory2_masterItemRetail.proxy.extraParams.limit=9999999;store_itemSubCategory2_masterItemRetail.proxy.extraParams.show_all_text=0;store_itemSubCategory2_masterItemRetail.proxy.extraParams.show_choose_text=1;store_itemSubCategory2_masterItemRetail.proxy.extraParams.is_dropdown=1;store_itemSubCategory2_masterItemRetail.proxy.extraParams.keywords='';var store_itemSubCategory3_masterItemRetail=theApp.getStore('store_itemSubCategory3_masterItemRetail',false);if(store_itemSubCategory3_masterItemRetail==false){store_itemSubCategory3_masterItemRetail=theApp.copyStore('master_pos','store_itemSubCategory3','store_itemSubCategory3_masterItemRetail');}
store_itemSubCategory3_masterItemRetail.proxy.extraParams.limit=9999999;store_itemSubCategory3_masterItemRetail.proxy.extraParams.show_all_text=0;store_itemSubCategory3_masterItemRetail.proxy.extraParams.show_choose_text=1;store_itemSubCategory3_masterItemRetail.proxy.extraParams.is_dropdown=1;store_itemSubCategory3_masterItemRetail.proxy.extraParams.keywords='';var store_itemSubCategory4_masterItemRetail=theApp.getStore('store_itemSubCategory4_masterItemRetail',false);if(store_itemSubCategory4_masterItemRetail==false){store_itemSubCategory4_masterItemRetail=theApp.copyStore('master_pos','store_itemSubCategory4','store_itemSubCategory4_masterItemRetail');}
store_itemSubCategory4_masterItemRetail.proxy.extraParams.limit=9999999;store_itemSubCategory4_masterItemRetail.proxy.extraParams.show_all_text=0;store_itemSubCategory4_masterItemRetail.proxy.extraParams.show_choose_text=1;store_itemSubCategory4_masterItemRetail.proxy.extraParams.is_dropdown=1;store_itemSubCategory4_masterItemRetail.proxy.extraParams.keywords='';var store_ComboboxMasterUnit=theApp.getStore('store_ComboboxMasterUnit',false);if(store_ComboboxMasterUnit==false){store_ComboboxMasterUnit=theApp.copyStore('master_pos','store_masterUnit','store_ComboboxMasterUnit');}
store_ComboboxMasterUnit.proxy.extraParams.limit=9999999;store_ComboboxMasterUnit.proxy.extraParams.show_all_text=0;store_ComboboxMasterUnit.proxy.extraParams.show_choose_text=1;store_ComboboxMasterUnit.proxy.extraParams.is_dropdown=1;store_ComboboxMasterUnit.proxy.extraParams.keywords='';var store_ComboboxMasterSupplier_masterItemRetail=theApp.getStore('store_ComboboxMasterSupplier_masterItemRetail',false);if(store_ComboboxMasterSupplier_masterItemRetail==false){store_ComboboxMasterSupplier_masterItemRetail=theApp.copyStore('master_pos','store_masterSupplier','store_ComboboxMasterSupplier_masterItemRetail');}
store_ComboboxMasterSupplier_masterItemRetail.proxy.extraParams.limit=9999999;store_ComboboxMasterSupplier_masterItemRetail.proxy.extraParams.show_choose_text=1;store_ComboboxMasterSupplier_masterItemRetail.proxy.extraParams.show_all_text=0;store_ComboboxMasterSupplier_masterItemRetail.proxy.extraParams.is_dropdown=1;store_ComboboxMasterSupplier_masterItemRetail.proxy.extraParams.keywords='';store_ComboboxMasterSupplier_masterItemRetail.proxy.extraParams.validated=0;var is_use_item_sku=opt_use_item_sku;var hide_use_item_sku=true;if(is_use_item_sku==='1'){hide_use_item_sku=false;}
return desktop.createWindow({id:me.id+'_add_masterItemRetail',title:Titletext,width:750,height:500,iconCls:'btn-add',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_masterItemRetail',border:0,layout:{type:'border'},items:[{xtype:'panel',flex:1,region:'center',layout:{type:'auto'},border:0,bodyPadding:10,margin:'0 5 0 0',defaults:{margin:'5 0 0 0',width:385},items:[{xtype:'hidden',name:'form_type_masterItem',value:me.formType},{xtype:'hidden',name:'form_module_masterItem',value:'retail'},{xtype:'hidden',name:'id'},{xtype:'hidden',name:'item_image'},{xtype:'panel',border:0,id:'item_code_are_masterItemRetail',layout:{type:'column'},margin:'0 0 5 0',items:[{xtype:'textfield',name:'item_code',fieldLabel:'Kode Item',width:300,labelWidth:100,emptyText:'- AUTO -',margin:'0 5 0 0',},{xtype:'button',text:'Update',id:'btnUpdateProductCode_masterItemRetail',tooltip:'Update Code',iconCls:'btn-tick',handler:function(){me.updateProductCode_masterItemRetail();}}]},{xtype:'textfield',name:'item_sku',fieldLabel:'SKU',width:300,labelWidth:100,allowBlank:true,hidden:hide_use_item_sku},{xtype:'textfield',name:'item_name',fieldLabel:'Nama Item',anchor:'100%',labelWidth:100,allowBlank:false},{xtype:'hidden',name:'item_type'},{xtype:'hidden',name:'unit_id'},{xtype:'hidden',name:'category_id'},{xtype:'hidden',name:'subcategory1_id'},{xtype:'hidden',name:'subcategory2_id'},{xtype:'hidden',name:'subcategory3_id'},{xtype:'hidden',name:'subcategory4_id'},{xtype:'hidden',name:'item_category_code'},{xtype:'hidden',name:'item_subcategory1_code'},{xtype:'hidden',name:'item_subcategory2_code'},{xtype:'hidden',name:'item_subcategory3_code'},{xtype:'hidden',name:'item_subcategory4_code'},{xtype:'combobox',name:'item_category_code_name',fieldLabel:'Category',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_itemCategory_masterItemRetail,displayField:'item_category_code_name',valueField:'id',queryMode:'local',allowBlank:false,listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('category_id').setValue(records[0].data.id);form2.findField('item_category_code_name').setValue(records[0].data.item_category_code_name);form2.findField('item_category_code').setValue(records[0].data.item_category_code);}}},{xtype:'combobox',name:'item_subcategory1_code_name',fieldLabel:'Sub Category 1',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_itemSubCategory1_masterItemRetail,displayField:'item_subcategory1_code_name',valueField:'id',queryMode:'local',listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('subcategory1_id').setValue(records[0].data.id);form2.findField('item_subcategory1_code_name').setValue(records[0].data.item_subcategory1_code_name);form2.findField('item_subcategory1_code').setValue(records[0].data.item_subcategory1_code);}}},{xtype:'combobox',name:'item_subcategory2_code_name',fieldLabel:'Sub Category 2',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_itemSubCategory2_masterItemRetail,displayField:'item_subcategory2_code_name',valueField:'id',queryMode:'local',listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('subcategory2_id').setValue(records[0].data.id);form2.findField('item_subcategory2_code_name').setValue(records[0].data.item_subcategory2_code_name);form2.findField('item_subcategory2_code').setValue(records[0].data.item_subcategory2_code);}}},{xtype:'combobox',name:'item_subcategory3_code_name',fieldLabel:'Sub Category 3',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_itemSubCategory3_masterItemRetail,displayField:'item_subcategory3_code_name',valueField:'id',queryMode:'local',listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('subcategory3_id').setValue(records[0].data.id);form2.findField('item_subcategory3_code_name').setValue(records[0].data.item_subcategory3_code_name);form2.findField('item_subcategory3_code').setValue(records[0].data.item_subcategory3_code);}}},{xtype:'combobox',name:'item_subcategory4_code_name',fieldLabel:'Sub Category 4',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_itemSubCategory4_masterItemRetail,displayField:'item_subcategory4_code_name',valueField:'id',queryMode:'local',listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('subcategory4_id').setValue(records[0].data.id);form2.findField('item_subcategory4_code_name').setValue(records[0].data.item_subcategory4_code_name);form2.findField('item_subcategory4_code').setValue(records[0].data.item_subcategory4_code);}}},{xtype:'combobox',name:'unit_code',fieldLabel:'Unit',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_ComboboxMasterUnit,displayField:'unit_code',valueField:'id',queryMode:'local',allowBlank:false,listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('unit_id').setValue(records[0].data.id);form2.findField('unit_code').setValue(records[0].data.unit_code);}}},{xtype:'numberfield',name:'item_price',fieldLabel:'Harga Beli',width:250,labelWidth:100,minValue:0,allowDecimals:true,allowBlank:false,hideTrigger:true,keyNavEnabled:false,mouseWheelEnabled:false},{xtype:'numberfield',name:'item_hpp',fieldLabel:'Hrg.Beli Rata2',width:250,labelWidth:100,minValue:0,allowDecimals:true,allowBlank:true,hideTrigger:true,keyNavEnabled:false,mouseWheelEnabled:false},{xtype:'numberfield',name:'min_stock',fieldLabel:'Min.Stock',width:250,labelWidth:100,minValue:0,margin:'5 0 5 0',allowDecimals:true,allowBlank:false,hideTrigger:true,keyNavEnabled:false,mouseWheelEnabled:false},{xtype:'checkbox',name:'is_active',labelWidth:100,fieldLabel:'Status Active',inputValue:'1',margin:'0 0 5 0'},{xtype:'textfield',name:'item_desc',fieldLabel:'Description',anchor:'100%',labelWidth:100,margin:'0 0 20 0'}]},{xtype:'panel',flex:0.8,region:'east',layout:{type:'auto'},border:0,bodyPadding:10,items:[{xtype:'displayfield',fieldLabel:'',value:'<b>Stok Kode Unik (SN/IMEI)</b>',anchor:'100%',},{xtype:'checkbox',name:'use_stok_kode_unik',labelWidth:180,fieldLabel:'Ya, Gunakan Stok SN/IMEI',inputValue:'1',margin:'0 0 25 0'},{xtype:'hidden',name:'use_stok_kode_unik',value:'0'},{xtype:'displayfield',fieldLabel:'',value:'<b>Setup Untuk Penjualan</b>',anchor:'100%',},{xtype:'checkbox',name:'use_for_sales',labelWidth:100,fieldLabel:'Untuk di Jual',inputValue:'1',},{xtype:'hidden',name:'id_ref_product'},{xtype:'numberfield',name:'sales_price',fieldLabel:'Harga Jual',width:250,labelWidth:100,minValue:0,allowDecimals:true,allowBlank:true,hideTrigger:true,keyNavEnabled:false,mouseWheelEnabled:false},{xtype:'checkbox',name:'sales_use_tax',labelWidth:100,fieldLabel:'Pakai Pajak',inputValue:'1',margin:'0 0 25 0'},{xtype:'checkbox',name:'sales_use_service',labelWidth:100,fieldLabel:'use Service',hidden:true,inputValue:'1',},{xtype:'displayfield',fieldLabel:'',value:'<b>Setup Untuk Kerjasama</b>',anchor:'100%',},{xtype:'checkbox',name:'is_kerjasama',labelWidth:150,fieldLabel:'Kerjasama/Bagi Hasil',inputValue:'1',margin:'0 0 5 0'},{xtype:'hidden',name:'supplier_id'},{xtype:'combobox',name:'supplier_name',fieldLabel:'Supplier',emptyText:'Choose Supplier',width:300,labelWidth:100,store:store_ComboboxMasterSupplier_masterItemRetail,displayField:'supplier_name',valueField:'id',queryMode:'local',margin:'0 0 5 0',listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_masterItemRetail').getForm();form2.findField('supplier_id').setValue(records[0].data.id);form2.findField('supplier_name').setValue(records[0].data.supplier_name);}}},{xtype:'textfield',name:'persentase_bagi_hasil',fieldLabel:'Persentase',width:160,labelWidth:100},{xtype:'displayfield',hidden:true,value:'Product Image'},{xtype:'filefield',name:'upload_image',emptyText:'Upload Image, Image min 640 (pixel)',msgTarget:'side',width:300,hidden:true,buttonText:'',buttonConfig:{iconCls:'btn-upload'}},{xtype:'image',id:'item_image_src',name:'item_image_src',autoEl:'div',hidden:true,margin:'5 0 5 0'}]}]}],buttons:[{text:'Save',formBind:true,id:'btnSave_masterItemRetail',iconCls:'btn-save',handler:function(){me.save_masterItemRetail();}},{text:'Close',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_masterItemRetail');}}],listeners:{show:function(){var form=Ext.getCmp('form_masterItemRetail').getForm();if(me.formType=='edit'){form.setValues(me.edit_data);if(me.edit_data.item_image!=''){Ext.getCmp('item_image_src').setSrc(me.edit_data.item_image_src);}
Ext.getCmp('btnUpdateProductCode_masterItemRetail').show();}else{form.reset();form.findField('is_active').setValue(1);Ext.getCmp('btnUpdateProductCode_masterItemRetail').hide();}
store_itemSubCategory1_masterItemRetail.load({callback:function(){if(me.formType=='edit'){form.findField('item_subcategory1_code_name').select(me.edit_data.subcategory1_id);}}});store_itemSubCategory2_masterItemRetail.load({callback:function(){if(me.formType=='edit'){form.findField('item_subcategory2_code_name').select(me.edit_data.subcategory2_id);}}});store_itemSubCategory3_masterItemRetail.load({callback:function(){if(me.formType=='edit'){form.findField('item_subcategory3_code_name').select(me.edit_data.subcategory3_id);}}});store_itemSubCategory4_masterItemRetail.load({callback:function(){if(me.formType=='edit'){form.findField('item_subcategory4_code_name').select(me.edit_data.subcategory4_id);}}});store_itemCategory_masterItemRetail.load({callback:function(){if(me.formType=='edit'){form.findField('item_category_code_name').select(me.edit_data.category_id);}}});store_ComboboxMasterUnit.load({callback:function(){if(me.formType=='edit'){form.findField('unit_code').select(me.edit_data.unit_id);}}});store_ComboboxMasterSupplier_masterItemRetail.load({callback:function(){if(me.formType=='edit'){form.findField('supplier_name').select(me.edit_data.supplier_id);}}});}}});}});