/**
 * Filename: systems.Roles.js
 * Generated 2018-09-04 at 08:49:19 PM
 */
Ext.define('ExtApp.modules.systems.model.model_roleData',{extend:'Ext.data.Model',alias:'model_roleData',fields:[{name:'id',type:'int'},{name:'role_name',type:'string'},{name:'role_description',type:'string'},{name:'client_id',type:'int'},{name:'client_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'systems/role/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.systems.model.model_moduleData',{extend:'Ext.data.Model',alias:'model_moduleData',fields:[{name:'id',type:'int'},{name:'module_name',type:'string'},{name:'module_folder',type:'string'}]});Ext.define('ExtApp.modules.systems.model.model_widgetData',{extend:'Ext.data.Model',alias:'model_widgetData',fields:[{name:'id',type:'int'},{name:'widget_name',type:'string'},{name:'widget_controller',type:'string'}]});Ext.define('ExtApp.modules.systems.store.store_roleData',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_roleData',autoLoad:false});Ext.define('ExtApp.modules.systems.store.store_moduleData',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_moduleData',autoLoad:false,sorters:['module_name','module_folder'],groupField:'module_folder',proxy:{type:'ajax',url:appUrl+'systems/role/moduleData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id'}}});Ext.define('ExtApp.modules.systems.store.store_moduleRoles',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_moduleData',autoLoad:false,sorters:['module_name','module_folder'],groupField:'module_folder',proxy:{type:'ajax',url:appUrl+'systems/role/moduleRoles',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id'}}});Ext.define('ExtApp.modules.systems.store.store_widgetData',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_widgetData',autoLoad:false,sorters:['widget_name'],proxy:{type:'ajax',url:appUrl+'systems/role/widgetData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id'}}});Ext.define('ExtApp.modules.systems.store.store_widgetRoles',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_widgetData',autoLoad:false,sorters:['widget_name'],proxy:{type:'ajax',url:appUrl+'systems/role/widgetRoles',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id'}}});Ext.define("ExtApp.modules.systems.view.Roles",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_Roles_Roles=theApp.getStore('store_Roles_Roles',false);if(store_Roles_Roles==false){store_Roles_Roles=theApp.copyStore('systems','store_roleData','store_Roles_Roles');}
store_Roles_Roles.proxy.extraParams.limit=25;store_Roles_Roles.proxy.extraParams.show_all_text=0;store_Roles_Roles.proxy.extraParams.show_choose_text=0;store_Roles_Roles.proxy.extraParams.is_dropdown=0;store_Roles_Roles.proxy.extraParams.keywords='';var helperGrid=theApp.getHelper('Grid');var selModel_Roles=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_Roles').down('#deleteButton_Roles').setDisabled(selections.length==0);}}});me.pagingtb_Roles=helperGrid.paging({ds:store_Roles_Roles,title:'Data Roles'});return desktop.createWindow({id:me.id,title:'Role Manager',width:700,height:380,iconCls:'icon-role-modules',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:0,layout:{type:'fit'},items:[{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:store_Roles_Roles,id:'grid_Roles',scroll:true,selModel:selModel_Roles,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'#ID',width:50,hideable:false},{xtype:'gridcolumn',dataIndex:'is_active',text:'Active',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'role_name',text:'Role Name',width:200},{xtype:'gridcolumn',dataIndex:'is_active_text',text:'Roles Status',width:100},{xtype:'gridcolumn',dataIndex:'role_description',text:'Description',width:200}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_Roles').getSelectionModel().selected;if(getSelection.length>0){me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_Roles');}}},bbar:me.pagingtb_Roles,dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'textfield',name:'keywords',id:'keywords_Roles',width:200,labelSeparator:'',emptyText:'Keywords: Role Name',anchor:'100%',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_Roles();}}}},{xtype:'button',text:'Search',itemId:'btnFilterSearch_Roles',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_Roles();}},{xtype:'button',text:'Reset',itemId:'btnResetFilterSearch_Roles',tooltip:'Reset',iconCls:'btn-reset',handler:function(){me.search_Roles(true);}},'->',{text:'Add',itemId:'addButton_Roles',tooltip:'Add New Roles',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_Roles');}},'-',{text:'Delete',itemId:'deleteButton_Roles',tooltip:'Delete Roles',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_Roles').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;me.deleteConfirm_Roles();}else{ExtApp.Msg.info('Please Select Roles!');}}},]}]}],listeners:{boxready:function(){me.search_Roles();}}});},add_Roles:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='New Roles ';if(me.formType=='edit'){Titletext='Update Roles: ';}
var grouping_moduleData=new Ext.create('Ext.grid.feature.Grouping',{});var grouping_moduleRoles=new Ext.create('Ext.grid.feature.Grouping',{});var store_moduleData=theApp.getStore('store_moduleData',false);if(store_moduleData==false){store_moduleData=theApp.copyStore('systems','store_moduleData','store_moduleData');}
store_moduleData.proxy.extraParams.limit=99999;store_moduleData.proxy.extraParams.keywords='';var store_moduleRoles=theApp.getStore('systems.store_moduleRoles');if(store_moduleRoles==false){store_moduleRoles=theApp.copyStore('systems','store_moduleRoles','store_moduleRoles');}
store_moduleRoles.proxy.extraParams.limit=99999;store_moduleRoles.proxy.extraParams.keywords='';var store_widgetData=theApp.getStore('systems.store_widgetData');var store_widgetRoles=theApp.getStore('systems.store_widgetRoles');return desktop.createWindow({id:me.id+'_add_Roles',title:Titletext,width:800,height:500,iconCls:'icon-role-modules',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'panel',border:0,height:256,layout:{type:'border'},items:[{xtype:'form',flex:1,bodyPadding:10,margins:'0 5 0 0',region:'west',id:'form_Roles',fieldDefaults:{labelAlign:'top',msgTarget:'side'},items:[{xtype:'textfield',fieldLabel:'Role Name',name:'role_name',anchor:'100%',allowBlank:false},{xtype:'textarea',fieldLabel:'Description',name:'role_description',anchor:'100%',height:80},{xtype:'checkbox',inputValue:'1',fieldLabel:'Active',name:'is_active',boxLabel:'check if active'},{xtype:'hidden',name:'id'},{xtype:'hidden',name:'form_type',value:'add'}]},{xtype:'panel',flex:2.8,region:'center',border:0,layout:{type:'fit'},items:[{xtype:'tabpanel',minHeight:280,activeTab:0,border:false,defaults:{layout:'fit'},items:[{title:'Modules Setup',layout:'fit',items:[{xtype:'panel',border:0,height:256,layout:{type:'border'},items:[{xtype:'gridpanel',flex:1,border:0,margins:'0 5 0 0',multiSelect:true,region:'center',id:'grid_moduleData',store:store_moduleData,features:[grouping_moduleData],columns:[{xtype:'gridcolumn',dataIndex:'module_name',text:'Data Module',width:250},{xtype:'gridcolumn',dataIndex:'module_folder',text:'Module',hidden:true}],scroll:true,viewConfig:{stripeRows:true,forceFit:true,plugins:{ptype:'gridviewdragdrop',dragGroup:'grid_moduleData',dropGroup:'grid_moduleRoles'}}},{xtype:'gridpanel',flex:1,border:0,multiSelect:true,region:'east',store:store_moduleRoles,id:'grid_moduleRoles',features:[grouping_moduleRoles],columns:[{xtype:'gridcolumn',dataIndex:'module_name',text:'Role Modules',width:250},{xtype:'gridcolumn',dataIndex:'module_folder',text:'Module',hidden:true}],scroll:true,viewConfig:{stripeRows:true,plugins:{ptype:'gridviewdragdrop',dragGroup:'grid_moduleRoles',dropGroup:'grid_moduleData'}}}]}]},{title:'Widget Setup',layout:'fit',items:[{xtype:'panel',border:0,height:256,layout:{type:'border'},items:[{xtype:'gridpanel',flex:1,border:0,margins:'0 5 0 0',multiSelect:true,region:'center',id:'grid_widgetData',store:store_widgetData,columns:[{xtype:'gridcolumn',dataIndex:'widget_name',text:'Data Widget',width:250},{xtype:'gridcolumn',dataIndex:'widget_controller',hidden:true}],scroll:true,viewConfig:{stripeRows:true,forceFit:true,plugins:{ptype:'gridviewdragdrop',dragGroup:'grid_widgetData',dropGroup:'grid_widgetRoles'}}},{xtype:'gridpanel',flex:1,border:0,multiSelect:true,region:'east',store:store_widgetRoles,id:'grid_widgetRoles',columns:[{xtype:'gridcolumn',dataIndex:'widget_name',text:'Role Widget',width:250},{xtype:'gridcolumn',dataIndex:'widget_controller',hidden:true}],scroll:true,viewConfig:{stripeRows:true,plugins:{ptype:'gridviewdragdrop',dragGroup:'grid_widgetRoles',dropGroup:'grid_widgetData'}}}]}]}]}]}]}],buttons:[{text:'Save',formBind:true,id:'btnSave_Roles',iconCls:'btn-save',handler:function(){me.save_Roles();}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_Roles');}}],listeners:{show:function(){var form=Ext.getCmp('form_Roles').getForm();if(me.formType=='edit'){form.setValues(me.edit_data);form.findField('form_type').setValue('edit');Ext.getCmp('grid_moduleData').store.load({params:{id_role:me.edit_data.id}});Ext.getCmp('grid_moduleRoles').store.load({params:{id_role:me.edit_data.id}});Ext.getCmp('grid_widgetData').store.load({params:{id_role:me.edit_data.id}});Ext.getCmp('grid_widgetRoles').store.load({params:{id_role:me.edit_data.id}});}else{form.reset();form.findField('form_type').setValue('add');Ext.getCmp('grid_moduleData').store.removeAll();Ext.getCmp('grid_moduleRoles').store.removeAll();Ext.getCmp('grid_widgetData').store.removeAll();Ext.getCmp('grid_widgetRoles').store.removeAll();Ext.getCmp('grid_moduleData').store.load({params:{role_id:0}});Ext.getCmp('grid_moduleRoles').store.load({params:{role_id:0}});Ext.getCmp('grid_widgetData').store.load({params:{role_id:0}});Ext.getCmp('grid_widgetRoles').store.load({params:{role_id:0}});}}}});}});