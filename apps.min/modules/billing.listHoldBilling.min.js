/**
 * Filename: billing.listHoldBilling.js
 * Generated 2021-01-01 at 03:47:34 AM
 */
Ext.define('ExtApp.modules.billing.model.model_dataBilling',{extend:'Ext.data.Model',alias:'model_dataBilling',fields:[{name:'id',type:'int'},{name:'item_no',type:'int'},{name:'table_id',type:'string'},{name:'table_no',type:'string'},{name:'billing_id',type:'int'},{name:'billing_no',type:'string'},{name:'billing_no_show',type:'string'},{name:'billing_date',type:'string'},{name:'created_datetime',type:'string'},{name:'created_date',type:'string'},{name:'updated_date',type:'string'},{name:'updated_time',type:'string'},{name:'payment_date',type:'string'},{name:'payment_time',type:'string'},{name:'billing_status',type:'string'},{name:'billing_notes',type:'string'},{name:'total_pembulatan',type:'string'},{name:'total_billing',type:'string'},{name:'total_billing_display',type:'string'},{name:'total_billing_show',type:'string'},{name:'grand_total',type:'string'},{name:'grand_total_show',type:'string'},{name:'total_paid',type:'string'},{name:'total_paid_show',type:'string'},{name:'payment_id',type:'int'},{name:'payment_type_name',type:'string'},{name:'bank_id',type:'int'},{name:'bank_name',type:'int'},{name:'card_no',type:'string'},{name:'include_tax',type:'int'},{name:'tax_percentage',type:'string'},{name:'tax_total',type:'string'},{name:'tax_total_show',type:'string'},{name:'include_service',type:'int'},{name:'service_percentage',type:'string'},{name:'service_total',type:'string'},{name:'service_total_show',type:'string'},{name:'discount_id',type:'int'},{name:'discount_notes',type:'string'},{name:'discount_percentage',type:'string'},{name:'discount_price',type:'string'},{name:'discount_total',type:'string'},{name:'discount_total_show',type:'string'},{name:'total_discount_item',type:'string'},{name:'total_discount_billing',type:'string'},{name:'total_qty_order',type:'float'},{name:'total_qty_deliver',type:'float'},{name:'order_total',type:'string'},{name:'order_total_show',type:'string'},{name:'total_hpp',type:'string'},{name:'total_hpp_show',type:'string'},{name:'total_profit',type:'string'},{name:'total_profit_show',type:'string'},{name:'percent_status_order',type:'string'},{name:'user_fullname',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'payment_note',type:'string'},{name:'is_half_payment',type:'int'},{name:'total_dp',type:'string'},{name:'total_dp_show',type:'string'},{name:'compliment_total',type:'string'},{name:'compliment_total_show',type:'string'},{name:'total_cash',type:'string'},{name:'total_cash_show',type:'string'},{name:'total_credit',type:'string'},{name:'total_credit_show',type:'string'},{name:'createdby',type:'string'},{name:'updatedby',type:'string'},{name:'merge_id',type:'int'},{name:'merge_billing_no',type:'string'},{name:'merge_main_status',type:'int'},{name:'split_from_id',type:'int'},{name:'split_merge_status',type:'string'},{name:'max_pembulatan',type:'int'},{name:'pembulatan_keatas',type:'int'},{name:'total_guest',type:'int'},{name:'sales_id',type:'int'},{name:'sales_percent',type:'string'},{name:'sales_price',type:'string'},{name:'sales_type',type:'string'},{name:'sales_name_company_fee',type:'string'},{name:'lock_billing',type:'int'},{name:'qc_notes',type:'string'},{name:'voucher_no',type:'string'},{name:'is_sistem_tawar',type:'int'},{name:'single_rate',type:'int'},{name:'customer_id',type:'int'},{name:'customer_name',type:'string'},{name:'block_table',type:'int'},{name:'is_salesorder',type:'int'},{name:'group_date',type:'string'},{name:'txmark',type:'string'},{name:'txmark_no',type:'string'},{name:'txmark_no_show',type:'string'},{name:'payment_note2',type:'string'},{name:'billing_info',type:'string'},{name:'table_button',type:'int'},{name:'billing_color',type:'string'},{name:'billing_datetime',type:'string'},{name:'billing_time',type:'string'},{name:'billing_no_before',type:'string'}],proxy:{type:'ajax',url:appUrl+'billing/dataBilling/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.billing.store.store_dataBilling',{extend:'Ext.data.Store',model:'ExtApp.modules.billing.model.model_dataBilling',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.billing.view.listHoldBilling",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var v_this=this;var helperGrid=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var store_listHoldBilling=theApp.getStore('store_listHoldBilling',false);if(store_listHoldBilling==false){store_listHoldBilling=theApp.copyStore('billing','store_dataBilling','store_listHoldBilling');}
store_listHoldBilling.proxy.extraParams.billing_status='hold';store_listHoldBilling.proxy.extraParams.is_peruser=0;store_listHoldBilling.proxy.extraParams.skip_date=0;store_listHoldBilling.proxy.extraParams.use_payment_date=0;store_listHoldBilling.proxy.extraParams.use_range_date=1;var selModel_listHoldBilling=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){}}});return desktop.createWindow({id:me.id,title:'List Hold Billing',width:850,height:500,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,border:0,layout:{type:'border'},items:[{xtype:'form',title:'Filter',width:330,region:'west',id:'form_filter_listHoldBilling',split:true,collapsible:true,splitterResize:false,collapseMode:'mini',animCollapse:true,scroll:false,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'textfield',name:'keywords',labelWidth:60,labelSeparator:'',emptyText:'Keywords: Billing No',anchor:'100%',margin:'0 0 15 0',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_listHoldBilling();}}}},{xtype:'checkbox',name:'use_range_date',fieldLabel:'Use Range Period',inputValue:'1',labelWidth:150,checked:true,margin:'0 0 10 0'},{xtype:'panel',border:0,layout:{type:'column'},margin:'0 0 15 0',items:[{xtype:'datefield',fieldLabel:'Date From',name:'date_from',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 0 0 0',labelWidth:65,width:170,value:phpJs.date('d-m-Y'),allowBlank:false},{xtype:'datefield',fieldLabel:' To ',name:'date_till',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 0 0 10',labelWidth:20,width:125,value:phpJs.date('d-m-Y'),allowBlank:false}]},{xtype:'container',style:'text-align:right',border:0,items:[{xtype:'button',text:'Search',scale:'medium',margin:'15 0 0 0',itemId:'btnFilterSearch_listHoldBilling',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_listHoldBilling();}},{xtype:'button',text:'Reset',scale:'medium',margin:'15 60 0 10',itemId:'btnFilterReset_listHoldBilling',tooltip:'Reset',iconCls:'btn-reset',handler:function(){var form=Ext.getCmp('form_filter_listHoldBilling').getForm();form.reset();form.findField('keywords').setValue('');form.findField('date_from').setValue(phpJs.date('01-m-Y'));form.findField('date_till').setValue(phpJs.date('t-m-Y'));me.search_listHoldBilling();}}]}]},{xtype:'gridpanel',region:'center',border:0,multiSelect:true,id:'grid_listHoldBilling',store:store_listHoldBilling,scroll:true,selModel:selModel_listHoldBilling,columns:[{xtype:'gridcolumn',dataIndex:'billing_id',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'order_total',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'order_total_hpp',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'updated_date',text:'LAST UPDATE',width:120},{xtype:'gridcolumn',dataIndex:'table_no',text:'TABLE',width:60},{xtype:'gridcolumn',dataIndex:'billing_no',text:'BILLING NO',width:100},{xtype:'gridcolumn',dataIndex:'total_qty_order',text:'QTY<br/>ORDER',width:70,align:'center'},{xtype:'gridcolumn',dataIndex:'order_total_show',text:'TOTAL',width:100,align:'right'},{xtype:'gridcolumn',dataIndex:'updatedby',text:'USER',width:120,align:'left'}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){}},bbar:helperGrid.paging({ds:store_listHoldBilling,title:'Hold Billing'}),dockedItems:[{xtype:'toolbar',dock:'top',items:[{text:'Filter',itemId:'filterButton_listHoldBilling',tooltip:'Filter List Hold Billing',iconCls:'btn-search',listeners:{click:function(){Ext.getCmp('form_filter_listHoldBilling').toggleCollapse();}}},'->',{text:'Set to Cancel',itemId:'setCancelButton_listHoldBilling',tooltip:'Set Status Billing to Cancel',iconCls:'btn-cancel',handler:function(){var getSelection=Ext.getCmp('grid_listHoldBilling').getSelectionModel().selected;if(getSelection.length>0){me.setBilling_data=getSelection.items[0].data;me.setCancelConfirm_listHoldBilling();}else{ExtApp.Msg.info('Please Select Billing!');}}},'-',{text:'Set to Active',itemId:'setActiveButton_listHoldBilling',tooltip:'Set Status Billing to Active',iconCls:'btn-cancel',handler:function(){var getSelection=Ext.getCmp('grid_listHoldBilling').getSelectionModel().selected;if(getSelection.length>0){me.setBilling_data=getSelection.items[0].data;me.setActiveConfirm_listHoldBilling();}else{ExtApp.Msg.info('Please Select Billing!');}}},'-',{text:'Refresh',itemId:'refreshButton_listHoldBilling',tooltip:'Refresh Data',iconCls:'btn-refresh',handler:function(){Ext.getCmp('grid_listHoldBilling').store.load();}}]}]}],listeners:{boxready:function(){Ext.getCmp('form_filter_listHoldBilling').toggleCollapse();me.search_listHoldBilling();}}});}});