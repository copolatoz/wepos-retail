/**
 * Filename: master_pos.oooMenu.js
 * Generated 2019-02-06 at 01:06:29 AM
 */
Ext.define('ExtApp.modules.master_pos.model.model_oooMenu',{extend:'Ext.data.Model',alias:'model_oooMenu',fields:[{name:'id',type:'int'},{name:'product_id',type:'int'},{name:'product_name',type:'string'},{name:'category_id',type:'int'},{name:'category_name',type:'string'},{name:'tanggal',type:'string'},{name:'keterangan',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/oooMenu/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterProduct',{extend:'Ext.data.Model',alias:'model_masterProduct',fields:[{name:'id',type:'int'},{name:'product_name',type:'string'},{name:'product_name_show',type:'string'},{name:'product_chinese_name',type:'string'},{name:'product_desc',type:'string'},{name:'normal_price',type:'string'},{name:'normal_price_show',type:'string'},{name:'product_price',type:'string'},{name:'product_price_show',type:'string'},{name:'product_hpp_show',type:'string'},{name:'product_hpp',type:'string'},{name:'category_id',type:'int'},{name:'product_category_name',type:'string'},{name:'product_group',type:'string'},{name:'product_type',type:'string'},{name:'product_image',type:'string'},{name:'product_image_show',type:'string'},{name:'product_image_src',type:'string'},{name:'has_varian',type:'int'},{name:'hide_compliment_order',type:'int'},{name:'use_tax',type:'int'},{name:'use_service',type:'int'},{name:'has_varian',type:'int'},{name:'has_varian_text',type:'string'},{name:'from_item',type:'int'},{name:'id_ref_item',type:'int'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'supplier_id',type:'int'},{name:'is_kerjasama',type:'int'},{name:'is_kerjasama_text',type:'string'},{name:'persentase_bagi_hasil',type:'string'},{name:'total_bagi_hasil',type:'string'},{name:'total_bagi_hasil_show',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterProduct/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_oooMenu',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_oooMenu',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_masterProduct',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterProduct',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.master_pos.view.oooMenu",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_oooMenu_oooMenu=theApp.getStore('store_oooMenu_oooMenu',false);if(store_oooMenu_oooMenu==false){store_oooMenu_oooMenu=theApp.copyStore('master_pos','store_oooMenu','store_oooMenu_oooMenu');}
store_oooMenu_oooMenu.proxy.extraParams.limit=25;store_oooMenu_oooMenu.proxy.extraParams.show_all_text=0;store_oooMenu_oooMenu.proxy.extraParams.show_choose_text=0;store_oooMenu_oooMenu.proxy.extraParams.is_dropdown=0;store_oooMenu_oooMenu.proxy.extraParams.is_active=1;store_oooMenu_oooMenu.proxy.extraParams.keywords='';var helperGrid=theApp.getHelper('Grid');var selModel_oooMenu=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_oooMenu').down('#deleteButton_oooMenu').setDisabled(selections.length==0);}}});me.pagingtb_oooMenu=helperGrid.paging({ds:store_oooMenu_oooMenu,title:'Out Of Order Product/Item'});return desktop.createWindow({id:me.id,title:'Out Of Order Product/Item',width:830,height:500,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:0,layout:{type:'fit'},items:[{xtype:'gridpanel',id:'grid_oooMenu',store:store_oooMenu_oooMenu,scroll:true,selModel:selModel_oooMenu,columns:[{xtype:'gridcolumn',dataIndex:'id',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'product_id',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'product_name',text:'Product/Menu',width:200},{xtype:'gridcolumn',dataIndex:'category_name',text:'Category',width:200},{xtype:'gridcolumn',dataIndex:'tanggal',text:'Periode',width:100,align:'center'},{xtype:'gridcolumn',dataIndex:'keterangan',text:'Keterangan',width:200,align:'center'}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_oooMenu').getSelectionModel().selected;if(getSelection.length>0){me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_oooMenu');}}},bbar:me.pagingtb_oooMenu,dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'textfield',name:'keywords',id:'keywords_oooMenu',width:200,labelSeparator:'',emptyText:'Keywords: Product/Menu',anchor:'100%',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_oooMenu();}}}},{xtype:'button',text:'Search',itemId:'btnFilterSearch_oooMenu',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_oooMenu();}},{xtype:'button',text:'Reset',itemId:'btnResetFilterSearch_oooMenu',tooltip:'Reset',iconCls:'btn-reset',handler:function(){me.search_oooMenu(true);}},'->',{text:'Add',itemId:'addButton_oooMenu',tooltip:'Add New Out Of Order Product/Item',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_oooMenu');}},'-',{text:'Delete',itemId:'deleteButton_oooMenu',tooltip:'Delete Out Of Order Product/Item',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_oooMenu').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;me.deleteConfirm_oooMenu();}else{ExtApp.Msg.info('Please Select Out Of Order Product/Item!');}}},]}]}],listeners:{boxready:function(){me.search_oooMenu();}}});},add_oooMenu:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Add Out Of Order Product/Item ';if(me.formType=='edit'){Titletext='Update Out Of Order Product/Item: ';}
var phpJs=theApp.getHelper('phpJs');var store_masterProduct_oooMenu=theApp.getStore('store_masterProduct_oooMenu',false);if(store_masterProduct_oooMenu==false){store_masterProduct_oooMenu=theApp.copyStore('master_pos','store_masterProduct','store_masterProduct_oooMenu');}
store_masterProduct_oooMenu.proxy.extraParams.limit=99999;store_masterProduct_oooMenu.proxy.extraParams.show_all_text=0;store_masterProduct_oooMenu.proxy.extraParams.show_choose_text=1;store_masterProduct_oooMenu.proxy.extraParams.is_dropdown=1;store_masterProduct_oooMenu.proxy.extraParams.product_type='item';store_masterProduct_oooMenu.proxy.extraParams.keywords='';store_masterProduct_oooMenu.proxy.extraParams.is_active=1;store_masterProduct_oooMenu.proxy.extraParams.from_module='ooo';return desktop.createWindow({id:me.id+'_add_oooMenu',title:Titletext,width:450,height:220,iconCls:'btn-add',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_oooMenu',border:0,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'hidden',name:'form_type_oooMenu',value:me.formType},{xtype:'hidden',name:'id'},{xtype:'datefield',fieldLabel:'Start Period',name:'tanggal_start',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',value:phpJs.date('d-m-Y'),allowBlank:false},{xtype:'datefield',fieldLabel:'End Period',name:'tanggal_end',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',value:phpJs.date('d-m-Y'),allowBlank:false},{xtype:'combobox',name:'product_id',fieldLabel:'Product/Menu',anchor:'100%',store:store_masterProduct_oooMenu,queryMode:'local',hiddenName:"product_id",displayField:'product_name',valueField:'id',typeAhead:true,minChars:1,forceSelection:true,allowBlank:false,listConfig:{emptyText:'No Data',minWidth:250,getInnerTpl:function(){return'{product_name}';}},pageSize:0},{xtype:'textfield',name:'keterangan',fieldLabel:'Keterangan',anchor:'100%',allowBlank:false}]}],buttons:[{text:'Save',formBind:true,id:'btnSave_oooMenu',iconCls:'btn-save',handler:function(){me.save_oooMenu();}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_oooMenu');}}],listeners:{show:function(){var form=Ext.getCmp('form_oooMenu').getForm();var myMask=new Ext.LoadMask(Ext.getCmp('form_oooMenu'),{msg:"Loading..."});myMask.show();if(me.formType=='edit'){form.setValues(me.edit_data);form.findField('tanggal_start').setValue(me.edit_data.tanggal);form.findField('tanggal_end').setValue(me.edit_data.tanggal);}else{form.reset();}
store_masterProduct_oooMenu.load({params:{show_all_text:1},callback:function(records,operation,success){var product_id=-1;var product_name='';if(me.formType=='edit'){product_id=me.edit_data.product_id;product_name=me.edit_data.product_name;}
form.findField('product_id').setValue(product_id);myMask.hide();}});}}});}});