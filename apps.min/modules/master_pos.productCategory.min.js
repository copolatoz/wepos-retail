/**
 * Filename: master_pos.productCategory.js
 * Generated 2020-11-19 at 10:21:27 PM
 */
Ext.define('ExtApp.modules.master_pos.model.model_productCategory',{extend:'Ext.data.Model',alias:'model_productCategory',fields:[{name:'id',type:'int'},{name:'parent_id',type:'int'},{name:'product_category_name',type:'string'},{name:'product_category_code',type:'string'},{name:'product_category_desc',type:'string'},{name:'product_category_code_name',type:'string'},{name:'from_item_category',type:'int'},{name:'from_item_category_text',type:'string'},{name:'list_no',type:'int'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'product_category_color',type:'string'},{name:'product_category_bg_color',type:'string'},{name:'product_category_text_color',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/productCategory/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_productCategory',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_productCategory',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.master_pos.view.productCategory",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_productCategory_productCategory=theApp.getStore('store_productCategory_productCategory',false);if(store_productCategory_productCategory==false){store_productCategory_productCategory=theApp.copyStore('master_pos','store_productCategory','store_productCategory_productCategory');}
store_productCategory_productCategory.proxy.extraParams.limit=25;store_productCategory_productCategory.proxy.extraParams.show_all_text=0;store_productCategory_productCategory.proxy.extraParams.show_choose_text=0;store_productCategory_productCategory.proxy.extraParams.is_dropdown=0;store_productCategory_productCategory.proxy.extraParams.is_active=0;store_productCategory_productCategory.proxy.extraParams.keywords='';var helperGrid=theApp.getHelper('Grid');var selModel_productCategory=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_productCategory').down('#deleteButton_productCategory').setDisabled(selections.length==0);}}});me.pagingtb_productCategory=helperGrid.paging({ds:store_productCategory_productCategory,title:'Category'});return desktop.createWindow({id:me.id,title:'Category',width:730,height:380,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:0,layout:{type:'fit'},items:[{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:store_productCategory_productCategory,id:'grid_productCategory',scroll:true,selModel:selModel_productCategory,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'#ID',width:60},{xtype:'gridcolumn',dataIndex:'product_category_code',text:'Code',width:80},{xtype:'gridcolumn',dataIndex:'product_category_name',text:'Name',width:200},{xtype:'gridcolumn',dataIndex:'product_category_color',text:'Warna',width:80,align:'center'},{xtype:'gridcolumn',dataIndex:'from_item_category_text',text:'Link Item.Cat',width:100},{xtype:'gridcolumn',dataIndex:'product_category_desc',text:'Description',width:200},{xtype:'gridcolumn',dataIndex:'list_no',text:'List No',width:100},{xtype:'gridcolumn',dataIndex:'is_active_text',text:'Status Active',width:100}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_productCategory').getSelectionModel().selected;if(getSelection.length>0){if(rec.data.from_item_category>0){ExtApp.Msg.info('Product/Menu Category Ini Terhubung dengan Item Category<br/>Edit/Hapus Data Silahkan Melalui Module: <b>Item Category</b>');}else{me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_productCategory');}}}},bbar:me.pagingtb_productCategory,dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'textfield',name:'keywords',id:'keywords_productCategory',width:200,labelSeparator:'',emptyText:'Keywords: Category Name',anchor:'100%',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_productCategory();}}}},{xtype:'button',text:'Search',itemId:'btnFilterSearch_productCategory',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_productCategory();}},{xtype:'button',text:'Reset',itemId:'btnResetFilterSearch_productCategory',tooltip:'Reset',iconCls:'btn-reset',handler:function(){me.search_productCategory(true);}},'->',{text:'Add',itemId:'addButton_productCategory',tooltip:'Add Category',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_productCategory');}},'-',{text:'Delete',itemId:'deleteButton_productCategory',tooltip:'Delete Category',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_productCategory').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;if(me.delete_data.from_item_category>0){ExtApp.Msg.info('Category Ini Terhubung dengan Item Category<br/>Edit/Hapus Data Silahkan Melalui Module: <b>Item Category</b>');}else{me.deleteConfirm_productCategory();}}else{ExtApp.Msg.info('Silahkan Pilih Category!');}}},]}]}],listeners:{boxready:function(){me.search_productCategory();}}});},add_productCategory:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Add New ';if(me.formType=='edit'){Titletext='Update ';}
return desktop.createWindow({id:me.id+'_add_productCategory',title:Titletext,width:350,height:300,iconCls:'btn-add',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_productCategory',border:0,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'hidden',name:'form_type_productCategory',value:me.formType},{xtype:'hidden',name:'id'},{xtype:'textfield',name:'product_category_code',fieldLabel:'Code',anchor:'100%',allowBlank:false},{xtype:'textfield',name:'product_category_name',fieldLabel:'Name',anchor:'100%',allowBlank:false},{xtype:'textfield',name:'product_category_desc',fieldLabel:'Description',anchor:'100%'},{xtype:'checkbox',name:'is_active',fieldLabel:'Status Active',inputValue:'1'},{xtype:'textfield',name:'list_no',fieldLabel:'List No',anchor:'50%',allowBlank:false},{xtype:'fieldcontainer',id:'product_bg_color_container',layout:{type:'column'},width:350,fieldLabel:'',items:[{xtype:'displayfield',name:'product_category_bg_color_show',fieldLabel:'Background',inputValue:'1',margin:'0 10 0 0',width:170,},{xtype:'hidden',name:'product_category_bg_color'},{xtype:'button',text:'Pilih Warna',id:'btn_product_category_bg_color_productCategory',tooltip:'Pilih Warna',menu:Ext.create('Ext.menu.ColorPicker',{listeners:{select:function(picker,selColor){var form=Ext.getCmp('form_productCategory').getForm();form.findField('product_category_bg_color').setValue(selColor);form.findField('product_category_bg_color_show').setValue(selColor);form.findField('product_category_bg_color_show').inputEl.setStyle({backgroundColor:'#'+selColor,border:'1px solid #ccc',textAlign:'center'});}}})}]},{xtype:'fieldcontainer',layout:{type:'column'},width:350,fieldLabel:'',items:[{xtype:'displayfield',name:'product_category_text_color_show',fieldLabel:'Text',inputValue:'1',margin:'0 10 0 0',width:170,},{xtype:'hidden',name:'product_category_text_color'},{xtype:'button',text:'Pilih Warna',id:'btn_product_category_text_color_productCategory',tooltip:'Pilih Warna',menu:Ext.create('Ext.menu.ColorPicker',{listeners:{select:function(picker,selColor){var form=Ext.getCmp('form_productCategory').getForm();form.findField('product_category_text_color').setValue(selColor);form.findField('product_category_text_color_show').setValue(selColor);form.findField('product_category_text_color_show').inputEl.setStyle({backgroundColor:'#'+selColor,border:'1px solid #ccc',textAlign:'center'});}}})}]}]}],buttons:[{text:'Save',formBind:true,id:'btnSave_productCategory',iconCls:'btn-save',handler:function(){me.save_productCategory();}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_productCategory');}}],listeners:{show:function(){var form=Ext.getCmp('form_productCategory').getForm();if(me.formType=='edit'){form.setValues(me.edit_data);form.findField('product_category_bg_color_show').setValue(me.edit_data.product_category_bg_color);form.findField('product_category_bg_color_show').inputEl.setStyle({backgroundColor:'#'+me.edit_data.product_category_bg_color,border:'1px solid #ccc',textAlign:'center'});form.findField('product_category_text_color_show').setValue(me.edit_data.product_category_text_color);form.findField('product_category_text_color_show').inputEl.setStyle({backgroundColor:'#'+me.edit_data.product_category_text_color,border:'1px solid #ccc',textAlign:'center'});}else{form.reset();form.findField('is_active').setValue(1);form.findField('product_category_bg_color_show').setValue('000000');form.findField('product_category_bg_color_show').inputEl.setStyle({backgroundColor:'#000000',border:'1px solid #ccc',textAlign:'center'});form.findField('product_category_text_color_show').setValue('FFFFFF');form.findField('product_category_text_color_show').inputEl.setStyle({backgroundColor:'#FFFFFF',border:'1px solid #ccc',textAlign:'center'});}}}});}});