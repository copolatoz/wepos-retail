/**
 * Filename: cashier.listOpenCloseCashier.js
 * Generated 2018-09-04 at 08:55:54 PM
 */
Ext.define('ExtApp.modules.cashier.model.model_openCloseCashier',{extend:'Ext.data.Model',alias:'model_openCloseCashier',fields:[{name:'id',type:'int'},{name:'item_no',type:'int'},{name:'kasir_user',type:'string'},{name:'spv_user',type:'string'},{name:'tipe_shift',type:'string'},{name:'tanggal_shift',type:'string'},{name:'jam_shift',type:'string'},{name:'uang_kertas_100000',type:'string'},{name:'uang_kertas_50000',type:'string'},{name:'uang_kertas_20000',type:'string'},{name:'uang_kertas_10000',type:'string'},{name:'uang_kertas_5000',type:'string'},{name:'uang_kertas_2000',type:'string'},{name:'uang_kertas_1000',type:'string'},{name:'uang_koin_1000',type:'string'},{name:'uang_koin_500',type:'string'},{name:'uang_koin_200',type:'string'},{name:'uang_koin_100',type:'string'},{name:'jumlah_uang_kertas',type:'string'},{name:'jumlah_uang_kertas_show',type:'string'},{name:'jumlah_uang_koin',type:'string'},{name:'jumlah_uang_koin_show',type:'string'},{name:'is_validate',type:'int'},{name:'created',type:'string'},{name:'createdby',type:'string'},{name:'updated',type:'string'},{name:'updatedby',type:'string'}],proxy:{type:'ajax',url:appUrl+'cashier/openCloseCashier/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.cashier.store.store_openCloseCashier',{extend:'Ext.data.Store',model:'ExtApp.modules.cashier.model.model_openCloseCashier',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.billing.store.store_tipeShift',{extend:'Ext.data.Store',fields:['val','name'],data:[{"val":"0","name":"All Shift"},{"val":"1","name":"Morning Shift"},{"val":"2","name":"Evening Shift"}],autoLoad:false});Ext.define("ExtApp.modules.cashier.view.listOpenCloseCashier",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var v_this=this;var helperGrid=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var store_listOpenCloseCashierGrid=theApp.getStore('store_listOpenCloseCashierGrid',false);if(store_listOpenCloseCashierGrid==false){store_listOpenCloseCashierGrid=theApp.copyStore('cashier','store_openCloseCashier','store_listOpenCloseCashierGrid');}
store_listOpenCloseCashierGrid.proxy.extraParams.tipe_shift='';store_listOpenCloseCashierGrid.proxy.extraParams.skip_date=0;var store_tipe_shift=theApp.getStore('store_tipe_shift',false);if(store_tipe_shift==false){store_tipe_shift=theApp.copyStore('billing','store_tipeShift','store_tipe_shift');}
return desktop.createWindow({id:me.id,title:'List Open Close Cashier',width:850,height:500,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,border:0,layout:{type:'border'},items:[{xtype:'form',title:'Filter',width:330,region:'west',id:'form_filter_listOpenCloseCashier',split:true,collapsible:true,splitterResize:false,collapseMode:'mini',animCollapse:true,scroll:false,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'textfield',name:'keywords',labelWidth:60,labelSeparator:'',emptyText:'Keywords: User Cashier',anchor:'100%',margin:'0 0 15 0',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_listOpenCloseCashier();}}}},{xtype:'combobox',name:'tipe_shift',fieldLabel:'Tipe',anchor:'100%',store:store_tipe_shift,queryMode:'local',hiddenName:"val",displayField:'name',valueField:'val',typeAhead:true,minChars:1,forceSelection:true,allowBlank:false},{xtype:'panel',border:0,layout:{type:'column'},margin:'0 0 15 0',items:[{xtype:'datefield',fieldLabel:'Date From',name:'date_from',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 0 0 0',labelWidth:65,width:170,value:phpJs.date('d-m-Y'),allowBlank:false},{xtype:'datefield',fieldLabel:' To ',name:'date_till',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 0 0 10',labelWidth:20,width:125,value:phpJs.date('d-m-Y'),allowBlank:false}]},{xtype:'container',style:'text-align:right',border:0,items:[{xtype:'button',text:'Search',scale:'medium',margin:'15 0 0 0',itemId:'btnFilterSearch_listOpenCloseCashier',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_listOpenCloseCashier();}},{xtype:'button',text:'Reset',scale:'medium',margin:'15 60 0 10',itemId:'btnFilterReset_listOpenCloseCashier',tooltip:'Reset',iconCls:'btn-reset',handler:function(){var form=Ext.getCmp('form_filter_listOpenCloseCashier').getForm();form.reset();form.findField('tipe_shift').select('');form.findField('keywords').setValue('');form.findField('date_from').setValue(phpJs.date('d-m-Y'));form.findField('date_till').setValue(phpJs.date('d-m-Y'));me.search_listOpenCloseCashier();}}]}]},{xtype:'gridpanel',region:'center',border:0,multiSelect:true,id:'grid_listOpenCloseCashier',store:store_listOpenCloseCashierGrid,scroll:true,columns:[{xtype:'gridcolumn',dataIndex:'id',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'tanggal_shift',text:'TANGGAL',width:120},{xtype:'gridcolumn',dataIndex:'jam_shift',text:'JAM',width:60},{xtype:'gridcolumn',dataIndex:'tipe_shift',text:'TYPE',width:60},{xtype:'gridcolumn',dataIndex:'kasir_user',text:'CASHIER',width:150},{xtype:'gridcolumn',dataIndex:'spv_user',text:'SUPERVISOR',width:150},{xtype:'gridcolumn',dataIndex:'jumlah_uang_kertas_show',text:'JML UANG KERTAS',width:150,align:'right'},{xtype:'gridcolumn',dataIndex:'jumlah_uang_koin_show',text:'JML UANG KOIN',width:150,align:'right'}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){me.data_openclosecashier=rec.data;me.print_openCloseCashier();}},bbar:helperGrid.paging({ds:store_listOpenCloseCashierGrid,title:'Cancel Billing'}),dockedItems:[{xtype:'toolbar',dock:'top',items:[{text:'Filter',itemId:'filterButton_listOpenCloseCashier',tooltip:'Filter List Open Close Cashiering',iconCls:'btn-search',listeners:{click:function(){Ext.getCmp('form_filter_listOpenCloseCashier').toggleCollapse();}}},'->',{text:'Refresh',itemId:'refreshButton_listOpenCloseCashier',tooltip:'Refresh Data',iconCls:'btn-refresh',handler:function(){Ext.getCmp('grid_listOpenCloseCashier').store.load();}}]}]}],listeners:{boxready:function(){Ext.getCmp('form_filter_listOpenCloseCashier').toggleCollapse();me.search_listOpenCloseCashier();}}});}});